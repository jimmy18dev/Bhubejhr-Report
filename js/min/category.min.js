var api_category="api/category.php";$(document).ready(function(){function e(){$(".edit-menu").hide()}var o,t;autosize($("textarea")),$dialogForm=$("#dialogForm"),$btnClose=$dialogForm.children(".topic").children(".btn-close-dialog"),$btnCreate=$("#btnCreate"),$btnSubmit=$("#btnSubmit"),$formProgress=$("#formProgress"),$dialogForm.ajaxForm({beforeSubmit:function(){$formProgress.fadeIn(100),$formProgress.width("0%"),$btnSubmit.prop("disabled",!0),$btnSubmit.addClass("loading"),$btnSubmit.html("กำลังบันทึก")},uploadProgress:function(e,o,t,a){var r=a;r=80*r/100,$formProgress.animate({width:r+"%"},100)},success:function(){$formProgress.animate({width:"90%"},300)},complete:function(e){$formProgress.animate({width:"100%"},300),console.log(e.responseText),console.log(e.responseJSON),setTimeout(function(){location.reload()},1e3)}}),$btnCreate.click(function(){$dialogForm.addClass("open"),$overlay.addClass("open")}),$btnClose.click(function(){$dialogForm.removeClass("open"),$overlay.removeClass("open"),$("#category_id").val(""),$("#name").val(""),$("#desc").val(""),$("#url").val("")}),$(".edit").click(function(a){a.stopPropagation(),o=$(this).parent().attr("data-id"),t=$(this).parent().children(".detail").children("h2").html(),e(),$submenu=$(this).children(".edit-menu"),$submenu.show()}),$(".edit").on("click",".btn-editor",function(){console.log(o),$.ajax({url:api_category,cache:!1,dataType:"json",type:"GET",data:{request:"get",category_id:o},error:function(e){console.log("Request Error",e.responseText)}}).done(function(o){console.log(o),$("#category_id").val(o.data.category_id),$("#name").val(o.data.category_name),$("#desc").val(o.data.category_desc),$dialogForm.addClass("open"),$overlay.addClass("open"),e()})}),$(".btn-deactive").click(function(){report_id=$(this).parent().attr("data-id"),$.ajax({url:api_report,cache:!1,dataType:"json",type:"POST",data:{request:"deactive",report_id:report_id},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()})}),$(".btn-active").click(function(){report_id=$(this).parent().attr("data-id"),$.ajax({url:api_report,cache:!1,dataType:"json",type:"POST",data:{request:"active",report_id:report_id},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()})}),$(".btn-delete").click(function(){return console.log(t),confirm('คุณต้องการลบ "'+t+'"ใช่หรือไม่ ?')?($.ajax({url:api_category,cache:!1,dataType:"json",type:"POST",data:{request:"delete",category_id:o},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}),void 0):!1}),$(document).click(function(o){$(o.target).closest(".edit-menu").length&&$(o.target).closest(".category-menu").length||e()})});