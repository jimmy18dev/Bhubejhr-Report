function login(){var e=$("#username").val(),o=$("#password").val(),r=$("#sign").val();return console.log("login()",e,o,r),""==e?($("#username").focus(),!1):""==o?(alert("คุณยังไม่ได้กรอกรหัสผ่าน!"),$("#password").focus(),!1):($progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$.get({url:api_user,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"login",username:e,password:o,sign:r},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),1==e.state?($("#btn-submit").addClass("-loading"),$("#btn-submit").html("logining..."),$progressbar.animate({width:"100%"},500),setTimeout(function(){window.location="index.php?login=success"},1e3)):0==e.state?($progressbar.animate({width:"0%"},500),alert("เข้าระบบไม่สำเร็จ กรุณาตรวจสอบอีกครั้ง!")):-1==e.state&&($progressbar.animate({width:"0%"},500),alert("คุณต้องรออีก 5 นาที เพื่อเข้าระบบใหม่!"))}).fail(function(){alert("ระบบทำงานผิดพลาด กรุณาลองใหม่อีกครั้ง!"),$progressbar.animate({width:"0%"},500),$("#password").focus(),$("#password").val("")}),void 0)}function register(){var e=$("#fullname").val(),o=$("#email").val(),r=$("#password").val(),a=$("#sign").val();return""==e||""==o||""==r?!1:($progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$.get({url:api_user,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"register",fullname:e,email:o,password:r,sign:a},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),$progressbar.animate({width:"100%"},500),setTimeout(function(){window.location="login.php?register=success"},1e3)}).fail(function(){alert("ระบบทำงานผิดพลาด กรุณาลองใหม่อีกครั้ง!")}),void 0)}var api_user="api/user.php";$(document).ready(function(){function e(){$editProfileDialog.fadeOut(300),$editProfileFilter.fadeOut(100)}function o(){$changePasswordDialog.fadeOut(300),$changePasswordFilter.fadeOut(100),$("#oldpassword").val(""),$("#newpassword").val(""),$("#renewpassword").val("")}var r=$("#sign").val();$progressbar=$("#progressbar"),$btnEditProfile=$("#btnEditProfile"),$editProfileFilter=$("#editProfileFilter"),$btnSubmiteditProfile=$("#btnSubmiteditProfile"),$btnCloseEditProfile=$("#btnCloseEditProfile"),$editProfileDialog=$("#editProfileDialog"),$btnProfile=$("#btnProfile"),$menuProfile=$("#menuProfile"),$filterProfile=$("#filterProfile"),$btnEditProfile.click(function(){$editProfileDialog.fadeIn(300),$editProfileFilter.fadeIn(100),$("#oldpassword").focus()}),$btnCloseEditProfile.click(function(){e()}),$btnSubmiteditProfile.click(function(){var e=$("#username").val(),o=$("#displayname").val();return""==e||""==o?!1:($.get({url:api_user,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"edit_profile",username:e,displayname:o,sign:r},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}).fail(function(){alert("Fail!")}),void 0)}),$btnChangePassword=$("#btnChangePassword"),$changePasswordDialog=$("#changePasswordDialog"),$changePasswordFilter=$("#changePasswordFilter"),$btnCloseChangePassword=$("#btnCloseChangePassword"),$btnSubmitChangePassword=$("#btnSubmitChangePassword"),$btnChangePassword.click(function(){$changePasswordDialog.fadeIn(300),$changePasswordFilter.fadeIn(100),$("#oldpassword").focus()}),$btnSubmitChangePassword.click(function(){var e=$("#oldpassword").val(),o=$("#newpassword").val(),a=$("#renewpassword").val();return""==e||""==o||""==a?!1:o!=a?!1:($.get({url:api_user,timeout:1e4,cache:!1,dataType:"json",type:"POST",data:{request:"change_password",oldpassword:e,newpassword:o,sign:r},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}).fail(function(){alert("Fail!")}),void 0)}),$btnCloseChangePassword.click(function(){o()})});